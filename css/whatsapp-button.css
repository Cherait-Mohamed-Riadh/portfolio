/* WhatsApp Button Styles */
.whatsapp-button {
    position: fixed !important;
    bottom: 120px !important;
    right: 20px !important;
    z-index: 998 !important; /* أقل من زر العودة للأعلى */
    transition: all 0.3s ease !important;
    pointer-events: auto !important;
}

.whatsapp-button a {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    background: #25d366 !important;
    color: white !important;
    padding: 16px 24px !important;
    border-radius: 12px !important;
    text-decoration: none !important;
    font-weight: 600 !important;
    box-shadow: 0 4px 20px rgba(37, 211, 102, 0.3) !important;
    transition: all 0.3s ease !important;
}

.whatsapp-button a:hover {
    background: #128c7e !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 6px 25px rgba(37, 211, 102, 0.4) !important;
}

.whatsapp-button i {
    font-size: 1.5rem !important;
}

.whatsapp-text {
    font-size: 0.875rem !important;
    white-space: nowrap !important;
}

.whatsapp-tooltip {
    position: absolute !important;
    right: 100% !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    background: #1f2937 !important;
    color: white !important;
    padding: 8px 16px !important;
    border-radius: 8px !important;
    font-size: 0.75rem !important;
    white-space: nowrap !important;
    margin-right: 16px !important;
    opacity: 0 !important;
    visibility: hidden !important;
    transition: all 0.3s ease !important;
    z-index: 999 !important;
}

.whatsapp-tooltip::after {
    content: '' !important;
    position: absolute !important;
    left: 100% !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    border: 5px solid transparent !important;
    border-left-color: #1f2937 !important;
}

.whatsapp-button:hover .whatsapp-tooltip {
    opacity: 1 !important;
    visibility: visible !important;
}

/* Responsive Design */
@media (max-width: 768px) {
    .whatsapp-button {
        bottom: 100px !important;
        left: 16px !important;
        right: auto !important;
        z-index: 998 !important;
    }
    
    .whatsapp-button a {
        padding: 8px !important;
        font-size: 0.8rem !important;
        min-width: 48px !important;
        min-height: 48px !important;
    }
    
    .whatsapp-text {
        display: none !important;
    }
    
    .whatsapp-button a {
        width: 56px !important;
        height: 56px !important;
        border-radius: 50% !important;
        justify-content: center !important;
        padding: 0 !important;
        box-shadow: 0 4px 16px rgba(37, 211, 102, 0.3) !important;
    }
    
    .whatsapp-tooltip {
        display: none !important;
    }
}

@media (max-width: 480px) {
    .whatsapp-button {
        bottom: 80px !important;
        left: 12px !important;
        right: auto !important;
    }
    
    .whatsapp-button a {
        width: 48px !important;
        height: 48px !important;
    }
}

/* ================================ */
/* Professional Mobile Enhancements */
/* ================================ */
@media (max-width: 768px) {
    /* Safe-area and placement (iOS notch friendly) - LEFT SIDE */
    .whatsapp-button {
        bottom: calc(16px + env(safe-area-inset-bottom)) !important;
        left: 16px !important;
        right: auto !important;
        z-index: 999 !important;
        filter: drop-shadow(0 10px 18px rgba(37, 211, 102, 0.25));
    }

    /* Elevated circular FAB with premium gradient */
    .whatsapp-button a {
        width: 60px !important;
        height: 60px !important;
        border-radius: 50% !important;
        background: linear-gradient(135deg, #25d366 0%, #2ee084 100%) !important;
        border: 1px solid rgba(255, 255, 255, 0.25) !important;
        box-shadow:
            0 10px 20px rgba(37, 211, 102, 0.30),
            0 4px 10px rgba(0, 0, 0, 0.08) !important;
        position: relative !important;
        overflow: hidden !important;
        -webkit-tap-highlight-color: transparent !important;
        backdrop-filter: saturate(140%) blur(2px);
    }

    /* Disable old shimmer from other styles to avoid conflicts */
    .whatsapp-button a::before {
        content: '' !important;
        position: absolute !important;
        inset: 0 !important;
        border-radius: 50% !important;
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.25) !important;
        background: none !important;
        pointer-events: none !important;
    }

    /* Soft pulsating ring for attention without being annoying */
    .whatsapp-button a::after {
        content: '' !important;
        position: absolute !important;
        inset: -6px !important;
        border-radius: 50% !important;
        border: 2px solid rgba(46, 224, 132, 0.35) !important;
        opacity: 0.9 !important;
        animation: whatsapp-pulse 2.6s ease-out infinite !important;
        pointer-events: none !important;
    }

    @keyframes whatsapp-pulse {
        0%   { transform: scale(0.85); opacity: 0.5; }
        60%  { transform: scale(1.4);  opacity: 0.0; }
        100% { transform: scale(1.4);  opacity: 0.0; }
    }

    /* Icon sizing and subtle lift on hover (for devices that support hover) */
    .whatsapp-button i {
        font-size: 26px !important;
    }

    @media (hover: hover) {
        .whatsapp-button a:hover {
            transform: translateY(-2px) scale(1.04) !important;
        }
    }

    /* Tap feedback (ripple-like) */
    .whatsapp-button a:active {
        transform: scale(0.96) !important;
        transition: transform 80ms ease !important;
    }

    .whatsapp-button a:active::after {
        animation: tap-ripple 0.5s ease-out 1 !important;
        border-color: rgba(255, 255, 255, 0.45) !important;
    }

    @keyframes tap-ripple {
        0%   { transform: scale(0.9);  opacity: 0.6; }
        100% { transform: scale(1.3); opacity: 0.0; }
    }

    /* Small online badge ping (top-right) */
    .whatsapp-button a span.badge, /* allow future DOM badge */
    .whatsapp-button a::marker { display: none; }

    .whatsapp-button a > i::after {
        content: '' !important;
        position: absolute !important;
        top: 6px !important;
        left: 6px !important;
        right: auto !important;
        width: 10px !important;
        height: 10px !important;
        background: #4ade80 !important;
        border: 2px solid #ffffff !important;
        border-radius: 50% !important;
        box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.35) !important;
    }

    /* Hide desktop-only text/tooltip (already hidden, enforce) */
    .whatsapp-text, .whatsapp-tooltip { display: none !important; }

    /* Respect reduced motion preferences */
    @media (prefers-reduced-motion: reduce) {
        .whatsapp-button a::after { animation: none !important; }
        .whatsapp-button a:hover, .whatsapp-button a:active { transform: none !important; }
    }

    /* Dark theme tuning */
    [data-theme="dark"] .whatsapp-button a {
        background: linear-gradient(135deg, #1fa855 0%, #26c86b 100%) !important;
        box-shadow:
            0 10px 22px rgba(31, 168, 85, 0.35),
            0 6px 14px rgba(0, 0, 0, 0.35) !important;
        border-color: rgba(255, 255, 255, 0.18) !important;
    }
}
